<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ÌïôÍµê WiFi Î≥¥Ïïà Î∂ÑÏÑùÍ∏∞</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            color: #333;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }

        .header {
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(10px);
            border-radius: 20px;
            padding: 30px;
            margin-bottom: 30px;
            text-align: center;
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.1);
        }

        .header h1 {
            color: #4c63d2;
            font-size: 2.5em;
            margin-bottom: 10px;
            font-weight: 700;
        }

        .header p {
            color: #666;
            font-size: 1.1em;
        }

        .main-content {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 30px;
            margin-bottom: 30px;
        }

        .card {
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(10px);
            border-radius: 20px;
            padding: 25px;
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.1);
            border: 1px solid rgba(255, 255, 255, 0.2);
        }

        .card h2 {
            color: #4c63d2;
            margin-bottom: 20px;
            font-size: 1.5em;
            border-bottom: 2px solid #e0e8ff;
            padding-bottom: 10px;
        }

        .form-group {
            margin-bottom: 20px;
        }

        .form-group label {
            display: block;
            margin-bottom: 8px;
            font-weight: 600;
            color: #555;
        }

        .form-group input, .form-group select, .form-group textarea {
            width: 100%;
            padding: 12px;
            border: 2px solid #e1e8ed;
            border-radius: 10px;
            font-size: 14px;
            transition: all 0.3s ease;
        }

        .form-group input:focus, .form-group select:focus, .form-group textarea:focus {
            outline: none;
            border-color: #4c63d2;
            box-shadow: 0 0 0 3px rgba(76, 99, 210, 0.1);
        }

        .btn {
            background: linear-gradient(135deg, #4c63d2 0%, #5a67d8 100%);
            color: white;
            border: none;
            padding: 12px 24px;
            border-radius: 10px;
            cursor: pointer;
            font-size: 14px;
            font-weight: 600;
            transition: all 0.3s ease;
            margin-right: 10px;
            margin-bottom: 10px;
        }

        .btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 25px rgba(76, 99, 210, 0.3);
        }

        .btn-secondary {
            background: linear-gradient(135deg, #48bb78 0%, #38a169 100%);
        }

        .btn-danger {
            background: linear-gradient(135deg, #f56565 0%, #e53e3e 100%);
        }

        .wifi-list {
            max-height: 400px;
            overflow-y: auto;
            border: 2px solid #e1e8ed;
            border-radius: 10px;
            padding: 15px;
            background: #f8fafc;
        }

        .wifi-item {
            background: white;
            padding: 15px;
            margin-bottom: 10px;
            border-radius: 10px;
            border-left: 4px solid #4c63d2;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.05);
            transition: all 0.3s ease;
        }

        .wifi-item:hover {
            transform: translateX(5px);
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.1);
        }

        .wifi-name {
            font-weight: 600;
            color: #2d3748;
            margin-bottom: 5px;
        }

        .wifi-details {
            font-size: 12px;
            color: #666;
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 10px;
        }

        .security-badge {
            display: inline-block;
            padding: 4px 8px;
            border-radius: 6px;
            font-size: 11px;
            font-weight: 600;
            text-transform: uppercase;
        }

        .security-open { background: #fed7d7; color: #c53030; }
        .security-wep { background: #feebc8; color: #dd6b20; }
        .security-wpa { background: #c6f6d5; color: #2f855a; }
        .security-wpa2 { background: #bee3f8; color: #2b6cb0; }
        .security-wpa3 { background: #d6f5d6; color: #22543d; }

        .signal-strength {
            display: flex;
            align-items: center;
            gap: 5px;
        }

        .signal-bars {
            display: flex;
            gap: 2px;
            align-items: end;
        }

        .signal-bar {
            width: 4px;
            background: #e2e8f0;
            border-radius: 2px;
        }

        .signal-bar.active { background: #4c63d2; }
        .signal-bar:nth-child(1) { height: 8px; }
        .signal-bar:nth-child(2) { height: 12px; }
        .signal-bar:nth-child(3) { height: 16px; }
        .signal-bar:nth-child(4) { height: 20px; }

        .data-table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 20px;
            background: white;
            border-radius: 10px;
            overflow: hidden;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.1);
        }

        .data-table th, .data-table td {
            padding: 12px;
            text-align: left;
            border-bottom: 1px solid #e2e8f0;
        }

        .data-table th {
            background: #4c63d2;
            color: white;
            font-weight: 600;
        }

        .data-table tr:hover {
            background: #f8fafc;
        }

        .full-width {
            grid-column: 1 / -1;
        }

        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            margin-top: 20px;
        }

        .stat-card {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 20px;
            border-radius: 15px;
            text-align: center;
        }

        .stat-number {
            font-size: 2em;
            font-weight: 700;
            margin-bottom: 5px;
        }

        .stat-label {
            font-size: 0.9em;
            opacity: 0.9;
        }

        .risk-indicator {
            padding: 8px 12px;
            border-radius: 20px;
            font-size: 12px;
            font-weight: 600;
            text-align: center;
        }

        .risk-low { background: #c6f6d5; color: #22543d; }
        .risk-medium { background: #feebc8; color: #dd6b20; }
        .risk-high { background: #fed7d7; color: #c53030; }

        .export-section {
            margin-top: 20px;
            padding: 20px;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 10px;
        }

        @media (max-width: 768px) {
            .main-content {
                grid-template-columns: 1fr;
            }
            
            .wifi-details {
                grid-template-columns: 1fr;
            }
            
            .stats-grid {
                grid-template-columns: 1fr 1fr;
            }
        }

        .loading {
            display: none;
            text-align: center;
            padding: 20px;
        }

        .spinner {
            border: 3px solid #f3f3f3;
            border-top: 3px solid #4c63d2;
            border-radius: 50%;
            width: 30px;
            height: 30px;
            animation: spin 1s linear infinite;
            margin: 0 auto 10px;
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>üîí ÌïôÍµê WiFi Î≥¥Ïïà Î∂ÑÏÑùÍ∏∞</h1>
            <p>WiFi ÎÑ§Ìä∏ÏõåÌÅ¨ Î≥¥Ïïà Ï∑®ÏïΩÏ†êÏùÑ Î∂ÑÏÑùÌïòÍ≥† ÏïàÏ†ÑÌïú ÌïôÍµê ÎÑ§Ìä∏ÏõåÌÅ¨ ÌôòÍ≤ΩÏùÑ Íµ¨Ï∂ïÌï¥Î≥¥ÏÑ∏Ïöî</p>
        </div>

        <div class="main-content">
            <!-- Ï∏°Ï†ï ÏÑ§Ï†ï Ìå®ÎÑê -->
            <div class="card">
                <h2>üìç Ï∏°Ï†ï ÏÑ§Ï†ï</h2>
                <div class="form-group">
                    <label for="location">Ï∏°Ï†ï ÏúÑÏπò</label>
                    <select id="location">
                        <option value="">ÏúÑÏπòÎ•º ÏÑ†ÌÉùÌïòÏÑ∏Ïöî</option>
                        <option value="ÍµêÏã§-1Ï∏µ-101Ìò∏">ÍµêÏã§ - 1Ï∏µ 101Ìò∏</option>
                        <option value="ÍµêÏã§-1Ï∏µ-102Ìò∏">ÍµêÏã§ - 1Ï∏µ 102Ìò∏</option>
                        <option value="ÍµêÏã§-2Ï∏µ-201Ìò∏">ÍµêÏã§ - 2Ï∏µ 201Ìò∏</option>
                        <option value="ÍµêÏã§-2Ï∏µ-202Ìò∏">ÍµêÏã§ - 2Ï∏µ 202Ìò∏</option>
                        <option value="ÎèÑÏÑúÍ¥Ä-1Ï∏µ">ÎèÑÏÑúÍ¥Ä - 1Ï∏µ</option>
                        <option value="ÎèÑÏÑúÍ¥Ä-2Ï∏µ">ÎèÑÏÑúÍ¥Ä - 2Ï∏µ</option>
                        <option value="Î≥µÎèÑ-1Ï∏µ">Î≥µÎèÑ - 1Ï∏µ</option>
                        <option value="Î≥µÎèÑ-2Ï∏µ">Î≥µÎèÑ - 2Ï∏µ</option>
                        <option value="Ïπ¥ÌéòÌÖåÎ¶¨ÏïÑ">Ïπ¥ÌéòÌÖåÎ¶¨ÏïÑ</option>
                        <option value="Ïö¥ÎèôÏû•">Ïö¥ÎèôÏû•</option>
                        <option value="Í∏∞ÌÉÄ">Í∏∞ÌÉÄ</option>
                    </select>
                </div>

                <div class="form-group">
                    <label for="customLocation">Í∏∞ÌÉÄ ÏúÑÏπò (ÏßÅÏ†ë ÏûÖÎ†•)</label>
                    <input type="text" id="customLocation" placeholder="Ïòà: 3Ï∏µ Í≥ºÌïôÏã§">
                </div>

                <div class="form-group">
                    <label for="measurer">Ï∏°Ï†ïÏûê</label>
                    <input type="text" id="measurer" placeholder="Ïù¥Î¶ÑÏùÑ ÏûÖÎ†•ÌïòÏÑ∏Ïöî">
                </div>

                <div class="form-group">
                    <label for="notes">ÌäπÏù¥ÏÇ¨Ìï≠</label>
                    <textarea id="notes" rows="3" placeholder="Ï∏°Ï†ï ÌôòÍ≤Ω, Ïù∏Ïõê Ïàò, ÌäπÎ≥ÑÌïú ÏÉÅÌô© Îì±ÏùÑ Í∏∞Î°ùÌïòÏÑ∏Ïöî"></textarea>
                </div>

                <button class="btn" onclick="startWiFiScan()">üì° WiFi Ïä§Ï∫î ÏãúÏûë</button>
                <button class="btn btn-secondary" onclick="addManualEntry()">‚úèÔ∏è ÏàòÎèô ÏûÖÎ†•</button>
            </div>

            <!-- WiFi Ïä§Ï∫î Í≤∞Í≥º -->
            <div class="card">
                <h2>üì∂ Í≤ÄÏÉâÎêú WiFi ÎÑ§Ìä∏ÏõåÌÅ¨</h2>
                
                <div class="loading" id="loading">
                    <div class="spinner"></div>
                    <p>WiFi ÎÑ§Ìä∏ÏõåÌÅ¨Î•º Í≤ÄÏÉâ Ï§ëÏûÖÎãàÎã§...</p>
                </div>

                <div id="wifiStatus" style="margin-bottom: 15px; padding: 10px; background: #e2e8f0; border-radius: 8px; text-align: center;">
                    <p>üì° Ïä§Ï∫î Î≤ÑÌäºÏùÑ ÌÅ¥Î¶≠ÌïòÏó¨ WiFi ÎÑ§Ìä∏ÏõåÌÅ¨Î•º Í≤ÄÏÉâÌïòÏÑ∏Ïöî</p>
                </div>

                <div class="wifi-list" id="wifiList">
                    <!-- WiFi Î™©Î°ùÏù¥ Ïó¨Í∏∞Ïóê ÌëúÏãúÎê©ÎãàÎã§ -->
                </div>

                <button class="btn btn-secondary" onclick="refreshScan()" style="margin-top: 15px;">üîÑ ÏÉàÎ°úÍ≥†Ïπ®</button>
            </div>
        </div>

        <!-- ÏàòÎèô ÏûÖÎ†• Î™®Îã¨ -->
        <div class="card full-width" id="manualEntrySection" style="display: none;">
            <h2>‚úèÔ∏è WiFi Ï†ïÎ≥¥ ÏàòÎèô ÏûÖÎ†•</h2>
            <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 15px;">
                <div class="form-group">
                    <label for="manualSSID">ÎÑ§Ìä∏ÏõåÌÅ¨ Ïù¥Î¶Ñ (SSID)</label>
                    <input type="text" id="manualSSID" placeholder="WiFi Ïù¥Î¶Ñ">
                </div>
                <div class="form-group">
                    <label for="manualSignal">Ïã†Ìò∏ Í∞ïÎèÑ (dBm)</label>
                    <input type="number" id="manualSignal" placeholder="-50" min="-100" max="-20">
                </div>
                <div class="form-group">
                    <label for="manualSecurity">Î≥¥Ïïà Î∞©Ïãù</label>
                    <select id="manualSecurity">
                        <option value="Open">Open (Î≥¥Ïïà ÏóÜÏùå)</option>
                        <option value="WEP">WEP</option>
                        <option value="WPA">WPA</option>
                        <option value="WPA2">WPA2</option>
                        <option value="WPA3">WPA3</option>
                    </select>
                </div>
                <div class="form-group">
                    <label for="manualChannel">Ï±ÑÎÑê</label>
                    <input type="number" id="manualChannel" placeholder="6" min="1" max="14">
                </div>
            </div>
            <button class="btn" onclick="saveManualEntry()">üíæ Ï†ÄÏû•</button>
            <button class="btn btn-danger" onclick="cancelManualEntry()">‚ùå Ï∑®ÏÜå</button>
        </div>

        <!-- Ï∏°Ï†ï Îç∞Ïù¥ÌÑ∞ ÌÖåÏù¥Î∏î -->
        <div class="card full-width">
            <h2>üìä Ï∏°Ï†ï Îç∞Ïù¥ÌÑ∞</h2>
            
            <!-- ÌÜµÍ≥Ñ ÏöîÏïΩ -->
            <div class="stats-grid">
                <div class="stat-card">
                    <div class="stat-number" id="totalNetworks">0</div>
                    <div class="stat-label">Ï¥ù ÎÑ§Ìä∏ÏõåÌÅ¨ Ïàò</div>
                </div>
                <div class="stat-card">
                    <div class="stat-number" id="openNetworks">0</div>
                    <div class="stat-label">Ïò§Ìîà ÎÑ§Ìä∏ÏõåÌÅ¨</div>
                </div>
                <div class="stat-card">
                    <div class="stat-number" id="avgSignal">0</div>
                    <div class="stat-label">ÌèâÍ∑† Ïã†Ìò∏Í∞ïÎèÑ</div>
                </div>
                <div class="stat-card">
                    <div class="stat-number" id="riskScore">0</div>
                    <div class="stat-label">ÏúÑÌóòÎèÑ Ï†êÏàò</div>
                </div>
            </div>

            <table class="data-table" id="dataTable">
                <thead>
                    <tr>
                        <th>ÏãúÍ∞Ñ</th>
                        <th>ÏúÑÏπò</th>
                        <th>ÎÑ§Ìä∏ÏõåÌÅ¨Î™Ö</th>
                        <th>Ïã†Ìò∏Í∞ïÎèÑ</th>
                        <th>Î≥¥ÏïàÎ∞©Ïãù</th>
                        <th>Ï±ÑÎÑê</th>
                        <th>ÏúÑÌóòÎèÑ</th>
                        <th>ÎèôÏûë</th>
                    </tr>
                </thead>
                <tbody>
                    <!-- Ï∏°Ï†ï Îç∞Ïù¥ÌÑ∞Í∞Ä Ïó¨Í∏∞Ïóê ÌëúÏãúÎê©ÎãàÎã§ -->
                </tbody>
            </table>

            <!-- Îç∞Ïù¥ÌÑ∞ ÎÇ¥Î≥¥ÎÇ¥Í∏∞ -->
            <div class="export-section">
                <h3>üì§ Îç∞Ïù¥ÌÑ∞ ÎÇ¥Î≥¥ÎÇ¥Í∏∞</h3>
                <button class="btn" onclick="exportToCSV()">üìÑ CSVÎ°ú ÎÇ¥Î≥¥ÎÇ¥Í∏∞</button>
                <button class="btn btn-secondary" onclick="exportToJSON()">üìã JSONÏúºÎ°ú ÎÇ¥Î≥¥ÎÇ¥Í∏∞</button>
                <button class="btn btn-danger" onclick="clearAllData()">üóëÔ∏è Î™®Îì† Îç∞Ïù¥ÌÑ∞ ÏÇ≠Ï†ú</button>
            </div>
        </div>
    </div>

    <script>
        // Ï†ÑÏó≠ Î≥ÄÏàò
        let measurementData = [];
        let currentLocation = '';

        // ÌéòÏù¥ÏßÄ Î°úÎìú Ïãú Ï†ÄÏû•Îêú Îç∞Ïù¥ÌÑ∞ Î∂àÎü¨Ïò§Í∏∞
        window.onload = function() {
            loadSavedData();
            updateStatistics();
            renderTable();
        };

        // WiFi Ïä§Ï∫î ÏãúÎÆ¨Î†àÏù¥ÏÖò (Ïã§Ï†ú ÌôòÍ≤ΩÏóêÏÑúÎäî Web API ÏÇ¨Ïö©)
        function startWiFiScan() {
            const location = document.getElementById('location').value || document.getElementById('customLocation').value;
            if (!location) {
                alert('Ï∏°Ï†ï ÏúÑÏπòÎ•º ÏÑ†ÌÉùÌïòÍ±∞ÎÇò ÏûÖÎ†•Ìï¥Ï£ºÏÑ∏Ïöî.');
                return;
            }

            currentLocation = location;
            document.getElementById('loading').style.display = 'block';
            document.getElementById('wifiStatus').innerHTML = '<p>üîç WiFi ÎÑ§Ìä∏ÏõåÌÅ¨Î•º Í≤ÄÏÉâ Ï§ëÏûÖÎãàÎã§...</p>';

            // Ïã§Ï†ú ÌôòÍ≤ΩÏóêÏÑúÎäî navigator.mediaDevices ÎòêÎäî WebRTC API ÏÇ¨Ïö©
            setTimeout(() => {
                simulateWiFiScan();
                document.getElementById('loading').style.display = 'none';
            }, 2000);
        }

        // WiFi Ïä§Ï∫î ÏãúÎÆ¨Î†àÏù¥ÏÖò Îç∞Ïù¥ÌÑ∞
        function simulateWiFiScan() {
            const sampleNetworks = [
                { ssid: 'SchoolWiFi_Main', signal: -45, security: 'WPA2', channel: 6, frequency: '2.4GHz' },
                { ssid: 'SchoolWiFi_Guest', signal: -52, security: 'WPA2', channel: 11, frequency: '2.4GHz' },
                { ssid: 'Student_Hotspot_1', signal: -67, security: 'WPA2', channel: 1, frequency: '2.4GHz' },
                { ssid: 'FreeWiFi', signal: -72, security: 'Open', channel: 3, frequency: '2.4GHz' },
                { ssid: 'Teacher_Mobile', signal: -58, security: 'WPA2', channel: 9, frequency: '2.4GHz' },
                { ssid: 'OldRouter', signal: -75, security: 'WEP', channel: 2, frequency: '2.4GHz' },
                { ssid: 'Cafe_WiFi', signal: -68, security: 'WPA3', channel: 36, frequency: '5GHz' }
            ];

            // ÎûúÎç§ÌïòÍ≤å ÏùºÎ∂Ä ÎÑ§Ìä∏ÏõåÌÅ¨Îßå ÌëúÏãú (Ïã§Ï†ú ÌôòÍ≤Ω ÏãúÎÆ¨Î†àÏù¥ÏÖò)
            const detectedNetworks = sampleNetworks.filter(() => Math.random() > 0.3);
            
            displayWiFiNetworks(detectedNetworks);
            document.getElementById('wifiStatus').innerHTML = `<p>‚úÖ ${detectedNetworks.length}Í∞úÏùò WiFi ÎÑ§Ìä∏ÏõåÌÅ¨Î•º Î∞úÍ≤¨ÌñàÏäµÎãàÎã§</p>`;
        }

        // WiFi ÎÑ§Ìä∏ÏõåÌÅ¨ Î™©Î°ù ÌëúÏãú
        function displayWiFiNetworks(networks) {
            const wifiList = document.getElementById('wifiList');
            wifiList.innerHTML = '';

            networks.forEach(network => {
                const wifiItem = document.createElement('div');
                wifiItem.className = 'wifi-item';
                wifiItem.innerHTML = `
                    <div class="wifi-name">${network.ssid}</div>
                    <div class="wifi-details">
                        <div>
                            <div class="signal-strength">
                                Ïã†Ìò∏: ${network.signal} dBm
                                <div class="signal-bars">
                                    ${generateSignalBars(network.signal)}
                                </div>
                            </div>
                        </div>
                        <div>
                            <span class="security-badge security-${network.security.toLowerCase()}">${network.security}</span>
                        </div>
                        <div>Ï±ÑÎÑê: ${network.channel}</div>
                        <div>Ï£ºÌååÏàò: ${network.frequency}</div>
                    </div>
                    <button class="btn" style="margin-top: 10px; font-size: 12px;" onclick="addToMeasurement('${network.ssid}', ${network.signal}, '${network.security}', ${network.channel})">
                        üìä Ï∏°Ï†ï Îç∞Ïù¥ÌÑ∞Ïóê Ï∂îÍ∞Ä
                    </button>
                `;
                wifiList.appendChild(wifiItem);
            });
        }

        // Ïã†Ìò∏ Í∞ïÎèÑ Î∞î ÏÉùÏÑ±
        function generateSignalBars(signal) {
            const strength = Math.min(4, Math.max(1, Math.floor((-signal + 100) / 20)));
            let bars = '';
            for (let i = 1; i <= 4; i++) {
                bars += `<div class="signal-bar ${i <= strength ? 'active' : ''}"></div>`;
            }
            return bars;
        }

        // Ï∏°Ï†ï Îç∞Ïù¥ÌÑ∞Ïóê Ï∂îÍ∞Ä
        function addToMeasurement(ssid, signal, security, channel) {
            const measurer = document.getElementById('measurer').value;
            const notes = document.getElementById('notes').value;
            
            if (!measurer) {
                alert('Ï∏°Ï†ïÏûê Ïù¥Î¶ÑÏùÑ ÏûÖÎ†•Ìï¥Ï£ºÏÑ∏Ïöî.');
                return;
            }

            const measurement = {
                timestamp: new Date().toLocaleString('ko-KR'),
                location: currentLocation,
                ssid: ssid,
                signal: signal,
                security: security,
                channel: channel,
                measurer: measurer,
                notes: notes,
                riskLevel: calculateRiskLevel(security, signal)
            };

            measurementData.push(measurement);
            saveData();
            updateStatistics();
            renderTable();
            
            alert(`${ssid} ÎÑ§Ìä∏ÏõåÌÅ¨Í∞Ä Ï∏°Ï†ï Îç∞Ïù¥ÌÑ∞Ïóê Ï∂îÍ∞ÄÎêòÏóàÏäµÎãàÎã§.`);
        }

        // ÏúÑÌóòÎèÑ Í≥ÑÏÇ∞
        function calculateRiskLevel(security, signal) {
            let risk = 0;
            
            // Î≥¥Ïïà Î∞©ÏãùÏóê Îî∞Î•∏ ÏúÑÌóòÎèÑ
            switch(security) {
                case 'Open': risk += 40; break;
                case 'WEP': risk += 30; break;
                case 'WPA': risk += 20; break;
                case 'WPA2': risk += 10; break;
                case 'WPA3': risk += 0; break;
            }
            
            // Ïã†Ìò∏ Í∞ïÎèÑÏóê Îî∞Î•∏ ÏúÑÌóòÎèÑ (ÎÑàÎ¨¥ Í∞ïÌïòÍ±∞ÎÇò ÏïΩÌïòÎ©¥ ÏúÑÌóò)
            if (signal > -40) risk += 20; // ÎÑàÎ¨¥ Í∞ïÌïú Ïã†Ìò∏
            else if (signal < -80) risk += 15; // ÎÑàÎ¨¥ ÏïΩÌïú Ïã†Ìò∏
            
            if (risk >= 50) return 'high';
            else if (risk >= 25) return 'medium';
            else return 'low';
        }

        // ÏàòÎèô ÏûÖÎ†• Î™®Îã¨ ÌëúÏãú
        function addManualEntry() {
            const location = document.getElementById('location').value || document.getElementById('customLocation').value;
            if (!location) {
                alert('Ï∏°Ï†ï ÏúÑÏπòÎ•º ÏÑ†ÌÉùÌïòÍ±∞ÎÇò ÏûÖÎ†•Ìï¥Ï£ºÏÑ∏Ïöî.');
                return;
            }
            currentLocation = location;
            document.getElementById('manualEntrySection').style.display = 'block';
        }

        // ÏàòÎèô ÏûÖÎ†• Ï†ÄÏû•
        function saveManualEntry() {
            const ssid = document.getElementById('manualSSID').value;
            const signal = parseInt(document.getElementById('manualSignal').value);
            const security = document.getElementById('manualSecurity').value;
            const channel = parseInt(document.getElementById('manualChannel').value);
            const measurer = document.getElementById('measurer').value;
            const notes = document.getElementById('notes').value;

            if (!ssid || !signal || !security || !channel || !measurer) {
                alert('Î™®Îì† ÌïÑÎìúÎ•º ÏûÖÎ†•Ìï¥Ï£ºÏÑ∏Ïöî.');
                return;
            }

            const measurement = {
                timestamp: new Date().toLocaleString('ko-KR'),
                location: currentLocation,
                ssid: ssid,
                signal: signal,
                security: security,
                channel: channel,
                measurer: measurer,
                notes: notes,
                riskLevel: calculateRiskLevel(security, signal)
            };

            measurementData.push(measurement);
            saveData();
            updateStatistics();
            renderTable();
            
            // ÏûÖÎ†• ÌïÑÎìú Ï¥àÍ∏∞Ìôî
            document.getElementById('manualSSID').value = '';
            document.getElementById('manualSignal').value = '';
            document.getElementById('manualChannel').value = '';
            
            alert('Ï∏°Ï†ï Îç∞Ïù¥ÌÑ∞Í∞Ä Ï∂îÍ∞ÄÎêòÏóàÏäµÎãàÎã§.');
            cancelManualEntry();
        }

        // ÏàòÎèô ÏûÖÎ†• Ï∑®ÏÜå
        function cancelManualEntry() {
            document.getElementById('manualEntrySection').style.display = 'none';
        }

        // ÌÜµÍ≥Ñ ÏóÖÎç∞Ïù¥Ìä∏
        function updateStatistics() {
            const totalNetworks = measurementData.length;
            const openNetworks = measurementData.filter(d => d.security === 'Open').length;
            const avgSignal = totalNetworks > 0 ? 
                Math.round(measurementData.reduce((sum, d) => sum + d.signal, 0) / totalNetworks) : 0;
            
            // ÏúÑÌóòÎèÑ Ï†êÏàò Í≥ÑÏÇ∞
            let riskScore = 0;
            if (totalNetworks > 0) {
                const openRatio = openNetworks / totalNetworks;
                const weakSignals = measurementData.filter(d => d.signal < -70).length / totalNetworks;
                const highRiskNetworks = measurementData.filter(d => d.riskLevel === 'high').length / totalNetworks;
                
                riskScore = Math.round((openRatio * 40 + weakSignals * 30 + highRiskNetworks * 30));
            }

            document.getElementById('totalNetworks').textContent = totalNetworks;
            document.getElementById('openNetworks').textContent = openNetworks;
            document.getElementById('avgSignal').textContent = avgSignal + ' dBm';
            document.getElementById('riskScore').textContent = riskScore + '/100';
        }

        // ÌÖåÏù¥Î∏î Î†åÎçîÎßÅ
        function renderTable() {
            const tableBody = document.querySelector('#dataTable tbody');
            tableBody.innerHTML = '';

            measurementData.forEach((data, index) => {
                const row = document.createElement('tr');
                row.innerHTML = `
                    <td>${data.timestamp}</td>
                    <td>${data.location}</td>
                    <td>${data.ssid}</td>
                    <td>${data.signal} dBm</td>
                    <td><span class="security-badge security-${data.security.toLowerCase()}">${data.security}</span></td>
                    <td>${data.channel}</td>
                    <td><span class="risk-indicator risk-${data.riskLevel}">${getRiskText(data.riskLevel)}</span></td>
                    <td><button class="btn btn-danger" style="font-size: 12px;" onclick="deleteEntry(${index})">ÏÇ≠Ï†ú</button></td>
                `;
                tableBody.appendChild(row);
            });
        }

        // ÏúÑÌóòÎèÑ ÌÖçÏä§Ìä∏ Î≥ÄÌôò
        function getRiskText(riskLevel) {
            switch(riskLevel) {
                case 'low': return 'ÎÇÆÏùå';
                case 'medium': return 'Î≥¥ÌÜµ';
                case 'high': return 'ÎÜíÏùå';
                default: return 'Ïïå Ïàò ÏóÜÏùå';
            }
        }

        // Îç∞Ïù¥ÌÑ∞ ÏÇ≠Ï†ú
        function deleteEntry(index) {
            if (confirm('Ïù¥ Ìï≠Î™©ÏùÑ ÏÇ≠Ï†úÌïòÏãúÍ≤†ÏäµÎãàÍπå?')) {
                measurementData.splice(index, 1);
                saveData();
                updateStatistics();
                renderTable();
            }
        }

        // CSV ÎÇ¥Î≥¥ÎÇ¥Í∏∞
        function exportToCSV() {
            if (measurementData.length === 0) {
                alert('ÎÇ¥Î≥¥ÎÇº Îç∞Ïù¥ÌÑ∞Í∞Ä ÏóÜÏäµÎãàÎã§.');
                return;
            }

            const headers = ['ÏãúÍ∞Ñ', 'ÏúÑÏπò', 'ÎÑ§Ìä∏ÏõåÌÅ¨Î™Ö', 'Ïã†Ìò∏Í∞ïÎèÑ(dBm)', 'Î≥¥ÏïàÎ∞©Ïãù', 'Ï±ÑÎÑê', 'ÏúÑÌóòÎèÑ', 'Ï∏°Ï†ïÏûê', 'ÌäπÏù¥ÏÇ¨Ìï≠'];
            const csvContent = [
                headers.join(','),
                ...measurementData.map(data => [
                    `"${data.timestamp}"`,
                    `"${data.location}"`,
                    `"${data.ssid}"`,
                    data.signal,
                    data.security,
                    data.channel,
                    getRiskText(data.riskLevel),
                    `"${data.measurer}"`,
                    `"${data.notes || ''}"`
                ].join(','))
            ].join('\n');

            downloadFile(csvContent, 'wifi_security_analysis.csv', 'text/csv');
        }

        // JSON ÎÇ¥Î≥¥ÎÇ¥Í∏∞
        function exportToJSON() {
            if (measurementData.length === 0) {
                alert('ÎÇ¥Î≥¥ÎÇº Îç∞Ïù¥ÌÑ∞Í∞Ä ÏóÜÏäµÎãàÎã§.');
                return;
            }

            const jsonContent = JSON.stringify({
                exportDate: new Date().toISOString(),
                totalMeasurements: measurementData.length,
                data: measurementData
            }, null, 2);

            downloadFile(jsonContent, 'wifi_security_analysis.json', 'application/json');
        }

        // ÌååÏùº Îã§Ïö¥Î°úÎìú
        function downloadFile(content, filename, mimeType) {
            const blob = new Blob([content], { type: mimeType });
            const url = URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = filename;
            document.body.appendChild(a);
            a.click();
            document.body.removeChild(a);
            URL.revokeObjectURL(url);
        }

        // Î™®Îì† Îç∞Ïù¥ÌÑ∞ ÏÇ≠Ï†ú
        function clearAllData() {
            if (confirm('Î™®Îì† Ï∏°Ï†ï Îç∞Ïù¥ÌÑ∞Î•º ÏÇ≠Ï†úÌïòÏãúÍ≤†ÏäµÎãàÍπå? Ïù¥ ÏûëÏóÖÏùÄ ÎêòÎèåÎ¶¥ Ïàò ÏóÜÏäµÎãàÎã§.')) {
                measurementData = [];
                saveData();
                updateStatistics();
                renderTable();
                alert('Î™®Îì† Îç∞Ïù¥ÌÑ∞Í∞Ä ÏÇ≠Ï†úÎêòÏóàÏäµÎãàÎã§.');
            }
        }

        // Ïä§Ï∫î ÏÉàÎ°úÍ≥†Ïπ®
        function refreshScan() {
            if (currentLocation) {
                startWiFiScan();
            } else {
                alert('Î®ºÏ†Ä Ï∏°Ï†ï ÏúÑÏπòÎ•º ÏÑ§Ï†ïÌï¥Ï£ºÏÑ∏Ïöî.');
            }
        }

        // Îç∞Ïù¥ÌÑ∞ Ï†ÄÏû•
        function saveData() {
            try {
                localStorage.setItem('wifiMeasurementData', JSON.stringify(measurementData));
            } catch (e) {
                console.warn('Îç∞Ïù¥ÌÑ∞ Ï†ÄÏû•Ïóê Ïã§Ìå®ÌñàÏäµÎãàÎã§:', e);
            }
        }

        // Ï†ÄÏû•Îêú Îç∞Ïù¥ÌÑ∞ Î∂àÎü¨Ïò§Í∏∞
        function loadSavedData() {
            try {
                const savedData = localStorage.getItem('wifiMeasurementData');
                if (savedData) {
                    measurementData = JSON.parse(savedData);
                }
            } catch (e) {
                console.warn('Ï†ÄÏû•Îêú Îç∞Ïù¥ÌÑ∞ Î∂àÎü¨Ïò§Í∏∞Ïóê Ïã§Ìå®ÌñàÏäµÎãàÎã§:', e);
                measurementData = [];
            }
        }

        // Ïã§Ï†ú WiFi Ïä§Ï∫î (Î∏åÎùºÏö∞Ï†Ä ÏßÄÏõê Ïãú)
        async function attemptRealWiFiScan() {
            try {
                // Web APIÎ•º ÌÜµÌïú Ïã§Ï†ú WiFi Ïä§Ï∫î (Ï†úÌïúÏ†Å ÏßÄÏõê)
                if ('navigator' in window && 'wifi' in navigator) {
                    const networks = await navigator.wifi.scan();
                    return networks;
                } else {
                    // ÎåÄÏïà: ÏãúÎÆ¨Î†àÏù¥ÏÖò Îç∞Ïù¥ÌÑ∞ ÏÇ¨Ïö©
                    return null;
                }
            } catch (error) {
                console.log('Ïã§Ï†ú WiFi Ïä§Ï∫î Î∂àÍ∞ÄÎä•, ÏãúÎÆ¨Î†àÏù¥ÏÖò Î™®Îìú ÏÇ¨Ïö©');
                return null;
            }
        }

        // ÌÇ§Î≥¥Îìú Îã®Ï∂ïÌÇ§
        document.addEventListener('keydown', function(e) {
            if (e.ctrlKey || e.metaKey) {
                switch(e.key) {
                    case 's':
                        e.preventDefault();
                        exportToCSV();
                        break;
                    case 'n':
                        e.preventDefault();
                        addManualEntry();
                        break;
                    case 'r':
                        e.preventDefault();
                        refreshScan();
                        break;
                }
            }
        });

        // ÏúÑÏπò Î≥ÄÍ≤Ω Ïãú ÏûêÎèô ÏóÖÎç∞Ïù¥Ìä∏
        document.getElementById('location').addEventListener('change', function() {
            currentLocation = this.value;
        });

        document.getElementById('customLocation').addEventListener('input', function() {
            if (this.value) {
                document.getElementById('location').value = '';
                currentLocation = this.value;
            }
        });

        // ÎèÑÏõÄÎßê Í∏∞Îä•
        function showHelp() {
            alert(`
WiFi Î≥¥Ïïà Î∂ÑÏÑùÍ∏∞ ÏÇ¨Ïö©Î≤ï:

1. Ï∏°Ï†ï ÏÑ§Ï†ï
   - ÏúÑÏπò ÏÑ†ÌÉù ÎòêÎäî ÏßÅÏ†ë ÏûÖÎ†•
   - Ï∏°Ï†ïÏûê Ïù¥Î¶Ñ ÏûÖÎ†•
   - ÌäπÏù¥ÏÇ¨Ìï≠ Í∏∞Î°ù

2. WiFi Ïä§Ï∫î
   - "WiFi Ïä§Ï∫î ÏãúÏûë" Î≤ÑÌäº ÌÅ¥Î¶≠
   - Í≤ÄÏÉâÎêú ÎÑ§Ìä∏ÏõåÌÅ¨ Ï§ë Î∂ÑÏÑùÌï† Ìï≠Î™© ÏÑ†ÌÉù

3. ÏàòÎèô ÏûÖÎ†•
   - Ïä§Ï∫îÏù¥ Î∂àÍ∞ÄÎä•Ìïú Í≤ΩÏö∞ ÏßÅÏ†ë ÏûÖÎ†•
   - Î™®Îì† ÌïÑÎìúÎ•º Ï†ïÌôïÌûà ÏûÖÎ†•

4. Îç∞Ïù¥ÌÑ∞ Í¥ÄÎ¶¨
   - CSV/JSON ÌòïÌÉúÎ°ú ÎÇ¥Î≥¥ÎÇ¥Í∏∞
   - Î∂àÌïÑÏöîÌïú Îç∞Ïù¥ÌÑ∞ ÏÇ≠Ï†ú

5. Îã®Ï∂ïÌÇ§
   - Ctrl+S: CSV ÎÇ¥Î≥¥ÎÇ¥Í∏∞
   - Ctrl+N: ÏàòÎèô ÏûÖÎ†•
   - Ctrl+R: Ïä§Ï∫î ÏÉàÎ°úÍ≥†Ïπ®

ÏúÑÌóòÎèÑ ÌèâÍ∞Ä:
- ÎÜíÏùå: Open/WEP ÎÑ§Ìä∏ÏõåÌÅ¨, ÎπÑÏ†ïÏÉÅ Ïã†Ìò∏
- Î≥¥ÌÜµ: Íµ¨Ìòï Î≥¥Ïïà Î∞©Ïãù
- ÎÇÆÏùå: WPA2/WPA3 Î≥¥Ïïà
            `);
        }

        // ÎèÑÏõÄÎßê Î≤ÑÌäº Ï∂îÍ∞Ä
        window.onload = function() {
            loadSavedData();
            updateStatistics();
            renderTable();
            
            // ÎèÑÏõÄÎßê Î≤ÑÌäº ÏÉùÏÑ±
            const helpButton = document.createElement('button');
            helpButton.className = 'btn';
            helpButton.innerHTML = '‚ùì ÎèÑÏõÄÎßê';
            helpButton.style.position = 'fixed';
            helpButton.style.bottom = '20px';
            helpButton.style.right = '20px';
            helpButton.style.zIndex = '1000';
            helpButton.onclick = showHelp;
            document.body.appendChild(helpButton);
        };

        // Î∞òÏùëÌòï ÌÖåÏù¥Î∏î
        function makeTableResponsive() {
            const table = document.getElementById('dataTable');
            if (window.innerWidth <= 768) {
                table.style.fontSize = '12px';
            } else {
                table.style.fontSize = '14px';
            }
        }

        window.addEventListener('resize', makeTableResponsive);
        makeTableResponsive();

        // Îç∞Ïù¥ÌÑ∞ Ïú†Ìö®ÏÑ± Í≤ÄÏÇ¨
        function validateMeasurementData(data) {
            const errors = [];
            
            if (!data.ssid || data.ssid.trim() === '') {
                errors.push('ÎÑ§Ìä∏ÏõåÌÅ¨ Ïù¥Î¶ÑÏù¥ ÎπÑÏñ¥ÏûàÏäµÎãàÎã§.');
            }
            
            if (!data.signal || data.signal > -20 || data.signal < -100) {
                errors.push('Ïã†Ìò∏ Í∞ïÎèÑÍ∞Ä Ïú†Ìö®ÌïòÏßÄ ÏïäÏäµÎãàÎã§. (-100 ~ -20 dBm)');
            }
            
            if (!data.channel || data.channel < 1 || data.channel > 165) {
                errors.push('Ï±ÑÎÑê Î≤àÌò∏Í∞Ä Ïú†Ìö®ÌïòÏßÄ ÏïäÏäµÎãàÎã§.');
            }
            
            if (!data.location || data.location.trim() === '') {
                errors.push('Ï∏°Ï†ï ÏúÑÏπòÍ∞Ä ÏÑ§Ï†ïÎêòÏßÄ ÏïäÏïòÏäµÎãàÎã§.');
            }
            
            return errors;
        }

        // Í≥†Í∏â ÌÜµÍ≥Ñ Í≥ÑÏÇ∞
        function calculateAdvancedStats() {
            if (measurementData.length === 0) return {};
            
            const stats = {
                locationStats: {},
                securityStats: {},
                signalStats: {
                    min: Math.min(...measurementData.map(d => d.signal)),
                    max: Math.max(...measurementData.map(d => d.signal)),
                    avg: Math.round(measurementData.reduce((sum, d) => sum + d.signal, 0) / measurementData.length)
                },
                channelStats: {}
            };
            
            // ÏúÑÏπòÎ≥Ñ ÌÜµÍ≥Ñ
            measurementData.forEach(data => {
                if (!stats.locationStats[data.location]) {
                    stats.locationStats[data.location] = { count: 0, avgSignal: 0, riskHigh: 0 };
                }
                stats.locationStats[data.location].count++;
                if (data.riskLevel === 'high') {
                    stats.locationStats[data.location].riskHigh++;
                }
            });
            
            // Î≥¥Ïïà Î∞©ÏãùÎ≥Ñ ÌÜµÍ≥Ñ
            measurementData.forEach(data => {
                stats.securityStats[data.security] = (stats.securityStats[data.security] || 0) + 1;
            });
            
            // Ï±ÑÎÑêÎ≥Ñ ÌÜµÍ≥Ñ
            measurementData.forEach(data => {
                stats.channelStats[data.channel] = (stats.channelStats[data.channel] || 0) + 1;
            });
            
            return stats;
        }

        // Î∂ÑÏÑù Î¶¨Ìè¨Ìä∏ ÏÉùÏÑ±
        function generateAnalysisReport() {
            const stats = calculateAdvancedStats();
            
            if (measurementData.length === 0) {
                alert('Î∂ÑÏÑùÌï† Îç∞Ïù¥ÌÑ∞Í∞Ä ÏóÜÏäµÎãàÎã§.');
                return;
            }
            
            const report = `
WiFi Î≥¥Ïïà Î∂ÑÏÑù Î¶¨Ìè¨Ìä∏
ÏÉùÏÑ±ÏùºÏãú: ${new Date().toLocaleString('ko-KR')}
Ï¥ù Ï∏°Ï†ï ÎÑ§Ìä∏ÏõåÌÅ¨: ${measurementData.length}Í∞ú

=== Î≥¥Ïïà ÌòÑÌô© ===
${Object.entries(stats.securityStats).map(([security, count]) => 
    `${security}: ${count}Í∞ú (${Math.round(count/measurementData.length*100)}%)`
).join('\n')}

=== Ïã†Ìò∏ Í∞ïÎèÑ ÌÜµÍ≥Ñ ===
ÏµúÍ∞ï Ïã†Ìò∏: ${stats.signalStats.max} dBm
ÏµúÏïΩ Ïã†Ìò∏: ${stats.signalStats.min} dBm
ÌèâÍ∑† Ïã†Ìò∏: ${stats.signalStats.avg} dBm

=== ÏúÑÌóòÎèÑ ÌèâÍ∞Ä ===
ÎÜíÏùÄ ÏúÑÌóò: ${measurementData.filter(d => d.riskLevel === 'high').length}Í∞ú
Î≥¥ÌÜµ ÏúÑÌóò: ${measurementData.filter(d => d.riskLevel === 'medium').length}Í∞ú
ÎÇÆÏùÄ ÏúÑÌóò: ${measurementData.filter(d => d.riskLevel === 'low').length}Í∞ú

=== Í∂åÍ≥†ÏÇ¨Ìï≠ ===
${generateRecommendations(stats)}
            `;
            
            // ÏÉà Ï∞ΩÏóêÏÑú Î¶¨Ìè¨Ìä∏ ÌëúÏãú
            const reportWindow = window.open('', '_blank');
            reportWindow.document.write(`
                <html>
                    <head><title>WiFi Î≥¥Ïïà Î∂ÑÏÑù Î¶¨Ìè¨Ìä∏</title></head>
                    <body style="font-family: monospace; white-space: pre-wrap; padding: 20px;">
                        ${report}
                        <br><br>
                        <button onclick="window.print()">Ïù∏ÏáÑ</button>
                        <button onclick="window.close()">Îã´Í∏∞</button>
                    </body>
                </html>
            `);
        }

        // Í∂åÍ≥†ÏÇ¨Ìï≠ ÏÉùÏÑ±
        function generateRecommendations(stats) {
            const recommendations = [];
            
            const openCount = stats.securityStats['Open'] || 0;
            if (openCount > 0) {
                recommendations.push(`‚Ä¢ ${openCount}Í∞úÏùò Î≥¥ÏïàÎêòÏßÄ ÏïäÏùÄ ÎÑ§Ìä∏ÏõåÌÅ¨Í∞Ä Î∞úÍ≤¨ÎêòÏóàÏäµÎãàÎã§. Ï¶âÏãú Î≥¥Ïïà ÏÑ§Ï†ïÏù¥ ÌïÑÏöîÌï©ÎãàÎã§.`);
            }
            
            const wepCount = stats.securityStats['WEP'] || 0;
            if (wepCount > 0) {
                recommendations.push(`‚Ä¢ ${wepCount}Í∞úÏùò WEP Î≥¥Ïïà ÎÑ§Ìä∏ÏõåÌÅ¨Í∞Ä Î∞úÍ≤¨ÎêòÏóàÏäµÎãàÎã§. WPA2 Ïù¥ÏÉÅÏúºÎ°ú ÏóÖÍ∑∏Î†àÏù¥ÎìúÍ∞Ä ÌïÑÏöîÌï©ÎãàÎã§.`);
            }
            
            const weakSignals = measurementData.filter(d => d.signal < -70).length;
            if (weakSignals > measurementData.length * 0.3) {
                recommendations.push('‚Ä¢ Ïã†Ìò∏Í∞Ä ÏïΩÌïú ÏßÄÏó≠Ïù¥ ÎßéÏäµÎãàÎã§. Ïï°ÏÑ∏Ïä§ Ìè¨Ïù∏Ìä∏ Ï∂îÍ∞Ä ÏÑ§ÏπòÎ•º Í≤ÄÌÜ†ÌïòÏÑ∏Ïöî.');
            }
            
            if (recommendations.length === 0) {
                recommendations.push('‚Ä¢ Ï†ÑÎ∞òÏ†ÅÏúºÎ°ú ÏñëÌò∏Ìïú Î≥¥Ïïà ÏÉÅÌÉúÏûÖÎãàÎã§. Ï†ïÍ∏∞Ï†ÅÏù∏ Ï†êÍ≤ÄÏùÑ Í≥ÑÏÜç ÏàòÌñâÌïòÏÑ∏Ïöî.');
            }
            
            return recommendations.join('\n');
        }

        // Î¶¨Ìè¨Ìä∏ ÏÉùÏÑ± Î≤ÑÌäº Ï∂îÍ∞Ä
        document.addEventListener('DOMContentLoaded', function() {
            const exportSection = document.querySelector('.export-section');
            if (exportSection) {
                const reportButton = document.createElement('button');
                reportButton.className = 'btn';
                reportButton.innerHTML = 'üìã Î∂ÑÏÑù Î¶¨Ìè¨Ìä∏ ÏÉùÏÑ±';
                reportButton.onclick = generateAnalysisReport;
                exportSection.insertBefore(reportButton, exportSection.lastElementChild);
            }
        });
    </script>
</body>
</html>